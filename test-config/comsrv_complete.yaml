service:
  name: "comsrv"
  redis:
    url: "redis://redis:6379"
    retry_attempts: 3
    retry_delay_ms: 1000
  logging:
    level: "debug"
    file: "/tmp/comsrv.log"
  api:
    enabled: true
    host: "0.0.0.0"
    port: 8001
    cors:
      allowed_origins: ["*"]
      allowed_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
      allowed_headers: ["*"]
      max_age: 3600

channels:
  # 通道 1001 - 直接 Modbus TCP
  - id: 1001
    name: "ModbusTCP测试通道1001"
    protocol: "modbus_tcp"
    enabled: true
    table_config:
      four_remote_route: "test_channel_1001"
      four_remote_files:
        measurement_file: "measurement_v2.csv"    
        signal_file: "signal_v2.csv"              
        adjustment_file: "adjustment_v2.csv"      
        control_file: "control_v2.csv"            

      protocol_mapping_route: "test_channel_1001/mappings"
      protocol_mapping_file:
        measurement_mapping: "modbus_measurement_v2.csv"
        signal_mapping: "modbus_signal_v2.csv"
        adjustment_mapping: "modbus_adjustment_v2.csv"
        control_mapping: "modbus_control_v2.csv"
    
    parameters:
      host: "172.31.1.11"
      port: 5020
      redis_url: "redis://redis:6379"
      polling_enabled: true
      polling_interval_ms: 2000
      timeout_ms: 500
      batch_config:
        enabled: true
        max_batch_size: 100
        max_gap: 5

  # 通道 1002 - 直接 Modbus TCP
  - id: 1002
    name: "ModbusTCP测试通道1002"
    protocol: "modbus_tcp"
    enabled: true
    table_config:
      four_remote_route: "test_channel_1002"
      four_remote_files:
        measurement_file: "measurement_v2.csv"    
        signal_file: "signal_v2.csv"              
        adjustment_file: "adjustment_v2.csv"      
        control_file: "control_v2.csv"            

      protocol_mapping_route: "test_channel_1002/mappings"
      protocol_mapping_file:
        measurement_mapping: "modbus_measurement_v2.csv"
        signal_mapping: "modbus_signal_v2.csv"
        adjustment_mapping: "modbus_adjustment_v2.csv"
        control_mapping: "modbus_control_v2.csv"
    
    parameters:
      host: "172.31.1.12"
      port: 5020
      redis_url: "redis://redis:6379"
      polling_enabled: true
      polling_interval_ms: 2000
      timeout_ms: 500
      batch_config:
        enabled: true
        max_batch_size: 100
        max_gap: 5

  # 通道 1003 - 通过 gRPC 插件
  - id: 1003
    name: "ModbusTCP测试通道1003（gRPC插件）"
    protocol: "grpc_modbus"
    enabled: true
    table_config:
      four_remote_route: "test_channel_1003"
      four_remote_files:
        measurement_file: "measurement_v2.csv"    
        signal_file: "signal_v2.csv"              
        adjustment_file: "adjustment_v2.csv"      
        control_file: "control_v2.csv"            

      protocol_mapping_route: "test_channel_1003/mappings"
      protocol_mapping_file:
        measurement_mapping: "modbus_measurement_v2.csv"
        signal_mapping: "modbus_signal_v2.csv"
        adjustment_mapping: "modbus_adjustment_v2.csv"
        control_mapping: "modbus_control_v2.csv"
    
    parameters:
      # gRPC 插件连接参数
      grpc_endpoint: "modbus-plugin:50051"
      protocol_type: "modbus_tcp"
      redis_url: "redis://redis:6379"
      
      # Modbus 设备连接参数（传递给插件）
      host: "172.31.1.13"
      port: 5020
      slave_id: 1
      
      # 轮询配置
      polling_enabled: true
      polling_interval_ms: 2000
      timeout_ms: 500
      batch_config:
        enabled: true
        max_batch_size: 100
        max_gap: 5