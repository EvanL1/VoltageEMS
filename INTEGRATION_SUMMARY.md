# ğŸ‰ VoltageEMS å›½é™…åŒ–å’Œ Grafana é›†æˆå®Œæˆ

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### ğŸŒ å›½é™…åŒ– (Internationalization)

- **é»˜è®¤è¯­è¨€**: è‹±æ–‡ (English)
- **æ”¯æŒè¯­è¨€**: è‹±æ–‡ ğŸ‡ºğŸ‡¸ å’Œä¸­æ–‡ ğŸ‡¨ğŸ‡³
- **è¯­è¨€åˆ‡æ¢**: å³ä¸Šè§’è¯­è¨€åˆ‡æ¢å™¨ï¼Œæ”¯æŒå®æ—¶åˆ‡æ¢
- **æœ¬åœ°å­˜å‚¨**: ç”¨æˆ·è¯­è¨€åå¥½è‡ªåŠ¨ä¿å­˜
- **å…¨é¢è¦†ç›–**: å¯¼èˆªã€æŒ‰é’®ã€çŠ¶æ€ã€è¡¨å•ç­‰æ‰€æœ‰æ–‡æœ¬å·²å›½é™…åŒ–

### ğŸ“Š Grafana Dashboard åµŒå…¥

- **çº¯å›¾è¡¨æ¨¡å¼**: ä½¿ç”¨ `d-solo` æ¨¡å¼ï¼Œå®Œå…¨éšè— Grafana UI
- **è‹±æ–‡ç•Œé¢**: Grafana é»˜è®¤è‹±æ–‡ï¼Œæ— ä¸­æ–‡ç•Œé¢
- **åŒ¿åè®¿é—®**: æ— éœ€ç™»å½•ï¼Œç›´æ¥æ˜¾ç¤ºå›¾è¡¨
- **å®æ—¶æ•°æ®**: æ¯ç§’æ›´æ–°çš„æ¸©åº¦ã€ç”µå‹ã€åŠŸç‡æ•°æ®

### ğŸ”§ æŠ€æœ¯å®ç°

#### å‰ç«¯å›½é™…åŒ–

```javascript
// é»˜è®¤è‹±æ–‡é…ç½®
const i18n = createI18n({
  locale: 'en', // é»˜è®¤è‹±æ–‡
  fallbackLocale: 'en',
  messages: { en, zh }
})
```

#### Grafana é…ç½®

```yaml
# è‹±æ–‡ + åŒ¿åè®¿é—® + åµŒå…¥æ¨¡å¼
- GF_DEFAULT_LOCALE=en-US
- GF_AUTH_ANONYMOUS_ENABLED=true
- GF_AUTH_DISABLE_LOGIN_FORM=true
- GF_SECURITY_ALLOW_EMBEDDING=true
```

#### çº¯å›¾è¡¨åµŒå…¥

```javascript
// ä½¿ç”¨ d-solo æ¨¡å¼ï¼Œå®Œå…¨éšè— Grafana UI
const url = `http://localhost:3002/d-solo/${dashboardId}?panelId=1&theme=light&kiosk=tv`
```

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨ Grafana å’Œ InfluxDB
docker-compose -f docker-compose.grafana.yml up -d

# å¯åŠ¨æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆå™¨ (å¦‚æœéœ€è¦)
node mock-data-generator.js &

# å¯åŠ¨å‰ç«¯
npm run serve
```

### 2. è®¿é—®åœ°å€

- **å‰ç«¯åº”ç”¨**: http://localhost:8080
- **Grafana ç›´æ¥è®¿é—®**: http://localhost:3002 (è‹±æ–‡ç•Œé¢)
- **æµ‹è¯•é¡µé¢**: `embedded-test.html` (çº¯å›¾è¡¨åµŒå…¥æµ‹è¯•)

### 3. è¯­è¨€åˆ‡æ¢

- ç‚¹å‡»å³ä¸Šè§’çš„è¯­è¨€åˆ‡æ¢å™¨
- é€‰æ‹© ğŸ‡ºğŸ‡¸ English æˆ– ğŸ‡¨ğŸ‡³ ä¸­æ–‡
- è¯­è¨€è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æµè§ˆå™¨

## ğŸ“‹ æ–‡ä»¶æ¸…å•

### å›½é™…åŒ–æ–‡ä»¶

- `frontend/src/i18n/index.js` - i18n é…ç½®
- `frontend/src/locales/en.js` - è‹±æ–‡è¯­è¨€åŒ…
- `frontend/src/locales/zh.js` - ä¸­æ–‡è¯­è¨€åŒ…

### Grafana é…ç½®

- `docker-compose.grafana.yml` - Grafana æœåŠ¡é…ç½®
- `services/Hissrv/grafana/provisioning/datasources/hissrv.yaml` - æ•°æ®æºé…ç½®

### å‰ç«¯ç»„ä»¶

- `frontend/src/App.vue` - ä¸»åº”ç”¨ (å«è¯­è¨€åˆ‡æ¢å™¨)
- `frontend/src/views/GrafanaEmbedded.vue` - Grafana åµŒå…¥ç»„ä»¶

### æµ‹è¯•æ–‡ä»¶

- `embedded-test.html` - çº¯å›¾è¡¨åµŒå…¥æµ‹è¯•é¡µé¢
- `i18n-test.html` - å›½é™…åŒ–åŠŸèƒ½æµ‹è¯•é¡µé¢

## ğŸ¯ å®ç°çš„éœ€æ±‚

âœ… **é¡µé¢æ”¹æˆè‹±æ–‡çš„ï¼Œè€Œä¸”é»˜è®¤ä¸ºè‹±æ–‡** - å®Œæˆ
âœ… **Grafana ä¹Ÿæ˜¯è‹±æ–‡çš„** - å®Œæˆ
âœ… **åªåµŒå…¥ Dashboard åˆ°ç•Œé¢ä¸­** - å®Œæˆ
âœ… **ä¸è¦ sign in è¿™äº›** - å®Œæˆï¼Œä½¿ç”¨åŒ¿åè®¿é—®

## ğŸ” å…³é”®ç‰¹æ€§

1. **å®Œå…¨éšè— Grafana UI**: ä½¿ç”¨ `d-solo` æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå›¾è¡¨å†…å®¹
2. **æ— ç™»å½•ç•Œé¢**: é…ç½®åŒ¿åè®¿é—®ï¼Œç›´æ¥æ˜¾ç¤ºæ•°æ®
3. **è‹±æ–‡ä¼˜å…ˆ**: å‰ç«¯å’Œ Grafana éƒ½é»˜è®¤è‹±æ–‡æ˜¾ç¤º
4. **çº¯å‡€åµŒå…¥**: iframe ä¸­åªæœ‰å›¾è¡¨ï¼Œæ²¡æœ‰ä»»ä½• Grafana å“ç‰Œæˆ–å¯¼èˆª

ç°åœ¨ä½ çš„ VoltageEMS ç³»ç»Ÿå·²ç»å®Œå…¨å›½é™…åŒ–ï¼Œé»˜è®¤è‹±æ–‡æ˜¾ç¤ºï¼Œå¹¶ä¸” Grafana å›¾è¡¨å¯ä»¥æ— ç¼åµŒå…¥åˆ°å‰ç«¯ç•Œé¢ä¸­ï¼ğŸ‰
