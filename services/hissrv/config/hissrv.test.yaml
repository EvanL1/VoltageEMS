# hissrv Docker测试环境配置

# 服务配置
service:
  name: "hissrv"
  version: "0.3.0"

# Redis 多服务测试配置
redis:
  host: "redis"
  port: 6379
  database: 0
  timeout_seconds: 10
  
  # 启用所有服务进行全面测试
  data_sources:
    # comsrv 通信服务数据
    comsrv:
      enabled: true
      data_types: ["m", "s", "c", "a"]
      measurement: "comsrv_data"
    
    # modsrv 模型服务数据
    modsrv:
      enabled: true
      data_types: ["measurement", "control"]
      measurement: "modsrv_data"
    
    # alarmsrv 告警服务数据
    alarmsrv:
      enabled: true
      data_types: ["alarm", "event"]
      measurement: "alarm_data"
    
    # rulesrv 规则服务数据（测试中暂不启用）
    rulesrv:
      enabled: false
      data_types: ["rule"]
      measurement: "rule_data"
  
  # comsrv数据类型映射
  type_mappings:
    m: "measurement"
    s: "signal"
    c: "control"
    a: "adjustment"

# InfluxDB 2.x 测试配置
influxdb:
  url: "http://influxdb:8086"
  org: "voltageems"
  bucket: "hissrv_data"
  token: "test-token-hissrv-12345"
  timeout_seconds: 10
  
  # 向下兼容字段 (可选)
  database: "hissrv_data"
  
  # 快速批量写入用于测试
  batch_size: 100
  flush_interval_seconds: 5

# 详细日志配置用于测试验证
logging:
  level: "debug"