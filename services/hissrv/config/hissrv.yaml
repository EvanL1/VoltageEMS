# hissrv 多服务兼容配置文件 - 支持Redis数据结构规范v3.2

# 服务配置
service:
  name: "hissrv"
  version: "0.3.0"

# Redis 多服务配置
redis:
  host: "127.0.0.1"
  port: 6379
  database: 0
  timeout_seconds: 30
  # password: "your_redis_password"  # 可选
  
  # 方式1: 传统订阅模式（向后兼容）
  # patterns:
  #   - "comsrv:*"      # 订阅所有comsrv通道
  #   - "modsrv:*"      # 订阅所有modsrv数据
  #   - "*:m:*"         # 订阅所有测量数据
  
  # 方式2: 多服务数据源配置（推荐）
  data_sources:
    # comsrv 通信服务数据
    comsrv:
      enabled: true
      data_types: ["m", "s", "c", "a"]  # 测量、状态、控制、调节
      measurement: "comsrv_data"        # InfluxDB measurement名称
      # channels: [1001, 1002]         # 可选：只订阅特定通道
    
    # modsrv 模型服务数据
    modsrv:
      enabled: false                    # 默认关闭
      data_types: ["measurement", "control"]
      measurement: "modsrv_data"
    
    # alarmsrv 告警服务数据
    alarmsrv:
      enabled: false                    # 默认关闭
      data_types: ["alarm", "event"]
      measurement: "alarm_data"
    
    # rulesrv 规则服务数据
    rulesrv:
      enabled: false                    # 默认关闭
      data_types: ["rule"]
      measurement: "rule_data"
  
  # comsrv数据类型映射（向后兼容）
  type_mappings:
    m: "measurement"    # 测量值 (YC)
    s: "signal"         # 信号值 (YX)
    c: "control"        # 控制值 (YK)
    a: "adjustment"     # 调节值 (YT)

# InfluxDB 配置
influxdb:
  url: "http://localhost:8086"
  database: "hissrv_data"
  timeout_seconds: 30
  # username: "your_username"  # 可选
  # password: "your_password"  # 可选
  
  # 批量写入配置
  batch_size: 1000
  flush_interval_seconds: 10

# 日志配置
logging:
  level: "info"