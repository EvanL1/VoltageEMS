# Network Service Configuration
service:
  name: netsrv
  version: 0.1.0
  description: Network Forwarding Service for VoltageEMS
  instance_id: netsrv-01

redis:
  url: redis://localhost:6379
  prefix: "voltage:net:"
  pool_size: 20
  database: 0

logging:
  level: info
  console: true
  file:
    path: logs/netsrv.log
    rotation: daily
    max_size: 100MB
    max_files: 7

monitoring:
  metrics_enabled: true
  metrics_port: 9095
  health_check_enabled: true
  health_check_port: 8096
  health_check_interval: 30

# Data Processing Configuration
data:
  redis_data_key: "voltage:data:*"
  redis_polling_interval_secs: 1
  enable_buffering: true
  buffer_size: 1000

# Network Configurations
networks:
  # Example: AWS IoT Core
  - type: cloud_mqtt
    name: aws_iot_production
    provider: aws
    provider_config:
      endpoint: xxxxx.iot.us-east-1.amazonaws.com
      port: 8883
      thing_name: voltage_device_01
    auth:
      type: certificate
      cert_path: certs/aws/device.crt
      key_path: certs/aws/device.key
      ca_path: certs/aws/AmazonRootCA1.pem
    topics:
      publish_template: "voltage/devices/{thing_name}/telemetry"
      subscribe_template: "voltage/devices/{thing_name}/commands"
      variables:
        thing_name: voltage_device_01
      qos: 1
    format_type: json
    tls:
      enabled: true
      verify_cert: true
      verify_hostname: true
  
  # Example: Aliyun IoT
  - type: cloud_mqtt
    name: aliyun_iot
    provider: aliyun
    provider_config:
      endpoint: xxxxx.iot-as-mqtt.cn-shanghai.aliyuncs.com
      port: 1883
      product_key: a1234567890
      device_name: voltage_meter_01
    auth:
      type: device_secret
      product_key: a1234567890
      device_name: voltage_meter_01
      device_secret: your_device_secret_here
    topics:
      publish_template: "/sys/{product_key}/{device_name}/thing/event/property/post"
      subscribe_template: "/sys/{product_key}/{device_name}/thing/service/property/set"
      variables:
        product_key: a1234567890
        device_name: voltage_meter_01
      qos: 0
    format_type: json
  
  # Example: Traditional MQTT Broker
  - type: legacy_mqtt
    name: local_mqtt
    broker: mqtt://192.168.1.100:1883
    client_id: voltage_netsrv_01
    auth:
      username: voltage
      password: secure_password
    topics:
      publish: voltage/telemetry
      subscribe: voltage/commands
      qos: 1
      retain: false
    format_type: json
    connection:
      keep_alive_secs: 60
      timeout_secs: 30
      reconnect_interval_secs: 5
      max_reconnect_attempts: 0
  
  # Example: HTTP REST API
  - type: http
    name: cloud_api
    url: https://api.voltage-ems.com/v1/data
    method: POST
    auth:
      type: bearer
      token: your_api_token_here
    headers:
      Content-Type: application/json
      X-Device-ID: voltage_device_01
    timeout_secs: 30
    format_type: json
  
  # Example: Azure IoT Hub
  - type: cloud_mqtt
    name: azure_iot
    provider: azure
    provider_config:
      hostname: your-iot-hub.azure-devices.net
      device_id: voltage_device_01
    auth:
      type: sas_token
      token: "SharedAccessSignature sr=..."
      expires_at: 1735689600
    topics:
      publish_template: "devices/{device_id}/messages/events/"
      subscribe_template: "devices/{device_id}/messages/devicebound/#"
      variables:
        device_id: voltage_device_01
      qos: 1
    format_type: json