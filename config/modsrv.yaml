# Model Service Configuration
# This file can be placed in:
# - /etc/voltageems/config/modsrv/modsrv.yaml (production)
# - ./config/modsrv.yaml (development)
# - Or specified via --config flag

# Service metadata
service:
  name: modsrv
  version: "1.0.0"
  description: "Model Service for VoltageEMS"
  # instance_id: "modsrv-1"  # Auto-generated if not specified

# Redis configuration
redis:
  url: "redis://localhost:6379"
  # Legacy format (still supported):
  # host: localhost
  # port: 6379
  database: 0
  key_prefix: "voltage:modsrv:"
  pool_size: 10
  # password: "your-password"  # Optional

# Logging configuration
logging:
  level: "info"  # trace, debug, info, warn, error
  console: true
  file: "logs/modsrv.log"
  log_dir: "logs"
  max_file_size: 10485760  # 10MB
  max_files: 5

# Model execution configuration
model:
  update_interval_ms: 1000
  config_key_pattern: "voltage:modsrv:model:config:*"
  data_key_pattern: "voltage:data:*"
  output_key_pattern: "voltage:modsrv:model:output:*"
  templates_dir: "templates"

# Control operations configuration
control:
  operation_key_pattern: "voltage:control:operation:*"
  enabled: true

# API server configuration
api:
  host: "0.0.0.0"
  port: 8092

# Monitoring configuration
monitoring:
  enabled: false
  metrics_port: 9092
  notification_threshold_ms: 5000  # Optional

# Storage configuration
storage:
  use_redis: true
  storage_mode: "hybrid"  # memory, redis, hybrid
  sync_interval_secs: 60

# Environment variable overrides:
# - MODSRV_REDIS_URL: Override redis.url
# - MODSRV_API_HOST: Override api.host
# - MODSRV_API_PORT: Override api.port
# - MODSRV_LOG_LEVEL: Override logging.level
# - MODSRV_MODEL_UPDATE_INTERVAL_MS: Override model.update_interval_ms
# - CONFIG_CENTER_URL: URL of configuration center (e.g., http://config-center:8080)